<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Somos Aventurados - Ecoturismo responsable, senderismo guiado y aventuras en la naturaleza. √önete a nuestra comunidad de aventureros.">
  <title>Somos Aventurados | Ecoturismo y Senderismo</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <style>
    :root {
      --whatsapp: #25D366;
      --green-primary: #4CAF50;
      --green-mountain: #2d5a3d;
      --green-dark: #1a3a28;
      --bg-dark: #0e2f36;
      --bg-card: #1a3d47;
      --text-primary: #ffffff;
      --text-secondary: #b8c5be;
      --accent: #76c893;
      --shadow: rgba(0, 0, 0, 0.5);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: var(--bg-dark);
      color: var(--text-primary);
      line-height: 1.6;
      overflow-x: hidden;
    }

    body.lightbox-open {
      overflow: hidden;
    }

    .container {
      max-width: 480px;
      margin: 0 auto;
      background: linear-gradient(180deg, rgba(14, 47, 54, 0.95) 0%, rgba(18, 56, 64, 0.97) 100%),
                  url('fondo2.jpg') center/cover fixed;
      min-height: 100vh;
      position: relative;
    }

    .hero {
      background: linear-gradient(180deg, rgba(0, 0, 0, 0.6) 0%, rgba(10, 22, 18, 0.9) 100%), 
                  url('fondo.jpg') center/cover;
      text-align: center;
      padding: 60px 24px 50px;
      position: relative;
    }

    .hero::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 100px;
      background: linear-gradient(to bottom, transparent, var(--bg-dark));
    }

    .logo {
      width: 390px;
      max-width: 95%;
      margin-bottom: 20px;
      filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.6));
      position: relative;
      z-index: 2;
    }

    .hero h1 {
      font-size: clamp(28px, 8vw, 36px);
      font-weight: 800;
      line-height: 1.2;
      margin-bottom: 12px;
      position: relative;
      z-index: 2;
    }

    .hero h1 .highlight {
      color: var(--accent);
      display: block;
    }

    .hero p {
      font-size: 16px;
      color: var(--text-secondary);
      margin-bottom: 30px;
      position: relative;
      z-index: 2;
    }

    .hero-subcopy {
      display: block;
      margin-top: 15px;
      font-size: 0.85rem;
      color: rgba(255, 255, 255, 0.8);
      text-align: center;
      text-decoration: none;
      cursor: pointer;
      transition: color 0.2s ease, text-decoration 0.2s ease;
    }

    .hero-subcopy:hover {
      text-decoration: underline;
      color: #4CAF50;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      width: calc(100% - 48px);
      max-width: 400px;
      padding: 18px 28px;
      background: linear-gradient(135deg, var(--green-primary) 0%, var(--green-mountain) 100%);
      color: var(--text-primary);
      font-weight: 700;
      font-size: 16px;
      text-decoration: none;
      border-radius: 50px;
      box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      z-index: 2;
      border: none;
      cursor: pointer;
      margin: 0 auto;
      overflow: hidden;
      animation: pulse-btn 2s infinite;
    }

    @keyframes pulse-btn {
      0%, 100% {
        box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
      }
      50% {
        box-shadow: 0 6px 30px rgba(76, 175, 80, 0.7);
      }
    }

    .btn::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -60%;
      width: 20%;
      height: 200%;
      background: rgba(255, 255, 255, 0.4);
      transform: rotate(30deg);
      animation: shine-effect 4s infinite;
    }

    @keyframes shine-effect {
      0% {
        left: -60%;
      }
      20% {
        left: 120%;
      }
      100% {
        left: 120%;
      }
    }

    .btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 30px rgba(76, 175, 80, 0.5);
    }

    .btn:active {
      transform: translateY(-1px);
    }

    .btn-secondary {
      background: linear-gradient(135deg, var(--green-mountain) 0%, var(--green-dark) 100%);
      box-shadow: 0 4px 15px rgba(45, 90, 61, 0.4);
    }

    .btn svg {
      width: 24px;
      height: 24px;
      flex-shrink: 0;
    }

    section {
      padding: 40px 24px;
    }

    .section-title {
      text-align: center;
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 28px;
      color: var(--accent);
      text-transform: uppercase;
      letter-spacing: 1px;
      position: relative;
      padding-bottom: 10px;
      width: fit-content;
      margin-left: auto;
      margin-right: auto;
    }

    .section-title::after {
      content: '';
      display: block;
      width: 100%;
      height: 3px;
      background: linear-gradient(90deg, transparent, #4CAF50, transparent);
      margin: 10px auto 0;
      border-radius: 2px;
    }

    .cards {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .card {
      background: var(--bg-card);
      border-radius: 16px;
      padding: 20px;
      display: flex;
      gap: 16px;
      align-items: flex-start;
      border: 1px solid rgba(118, 200, 147, 0.1);
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px var(--shadow);
    }

    .card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 24px rgba(118, 200, 147, 0.2);
      border-color: rgba(118, 200, 147, 0.3);
    }

    .card-icon {
      font-size: 32px;
      flex-shrink: 0;
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
    }

    .card-content h3 {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 6px;
      color: var(--text-primary);
    }

    .card-content p {
      font-size: 14px;
      color: var(--text-secondary);
      line-height: 1.5;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px;
      margin-top: 24px;
    }

    .stat-card {
      background: var(--bg-card);
      border-radius: 16px;
      padding: 20px 12px;
      text-align: center;
      border: 1px solid rgba(118, 200, 147, 0.1);
      transition: all 0.3s ease;
    }

    .stat-card:hover {
      transform: translateY(-4px);
      border-color: rgba(118, 200, 147, 0.3);
      box-shadow: 0 8px 24px rgba(118, 200, 147, 0.2);
    }

    .stat-number {
      font-size: 28px;
      font-weight: 800;
      color: var(--accent);
      display: block;
      margin-bottom: 6px;
    }

    .stat-label {
      font-size: 12px;
      color: var(--text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    /* ===============================
       PR√ìXIMAS AVENTURAS (Supabase)
       =============================== */
    #upcomingRoutes {
      display: none;
      padding: 50px 24px 40px;
      position: relative;
    }

    #upcomingRoutes.active {
      display: block;
      animation: fadeInSection 0.6s ease-out;
    }

    @keyframes fadeInSection {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    #upcomingRoutes .section-title {
      position: relative;
      display: inline-block;
      left: 50%;
      transform: translateX(-50%);
      padding-bottom: 12px;
    }

    #upcomingRoutes .section-title::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, transparent, var(--accent), transparent);
      border-radius: 2px;
    }

    .routes-grid {
      display: flex;
      flex-direction: column;
      gap: 20px;
      margin-top: 32px;
    }

    /* NUEVO DISE√ëO DE TARJETA (COVER CARD) */
    .route-card {
      position: relative;
      border-radius: 16px;
      overflow: hidden;
      border: 1px solid rgba(118, 200, 147, 0.15);
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      animation: slideInCard 0.5s ease-out;
      animation-fill-mode: both;
      background: transparent;
    }

    /* Parte superior: imagen de flyer */
    .route-image-header {
      position: relative;
      height: 200px;
      background-size: cover;
      background-position: center;
      border-radius: 16px 16px 0 0;
      overflow: hidden;
    }

    .route-image-header::after {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(to bottom, rgba(0, 0, 0, 0.35), rgba(0, 0, 0, 0.75));
    }

    /* Badge de d√≠a (macro) */
    .route-day-indicator {
      position: absolute;
      top: 16px;
      right: 16px;
      background: linear-gradient(135deg, #ff7e3a, #ff4d00);
      color: white;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1px;
      box-shadow: 0 4px 12px rgba(255, 140, 66, 0.5);
      z-index: 10;
    }

    .route-card:nth-child(1) {
      animation-delay: 0.1s;
    }

    .route-card:nth-child(2) {
      animation-delay: 0.2s;
    }

    @keyframes slideInCard {
      from {
        opacity: 0;
        transform: translateX(-30px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .route-card:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: 0 16px 40px rgba(118, 200, 147, 0.3);
      border-color: rgba(118, 200, 147, 0.4);
    }

    .route-card-inner {
      padding: 20px 20px 18px;
      position: relative;
      z-index: 1;
      background: #132F35;
      border-radius: 0 0 16px 16px;
    }

    .route-header {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-bottom: 16px;
    }

    .route-title {
      font-size: 20px;
      font-weight: 800;
      color: var(--text-primary);
      line-height: 1.3;
    }

    .route-subdate {
      font-size: 0.9rem;
      color: #b8c5be;
      margin-top: 2px;
      margin-bottom: 8px;
    }

    .route-info-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin: 20px 0;
      padding: 16px;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 12px;
      border: 1px solid rgba(118, 200, 147, 0.1);
    }

    .route-info-item {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .route-info-label {
      font-size: 11px;
      color: var(--text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      font-weight: 600;
    }

    .route-info-value {
      font-size: 15px;
      color: var(--text-primary);
      font-weight: 700;
    }

    .route-progress {
      margin-top: 4px;
      margin-bottom: 12px;
    }

    .route-progress-bar {
      height: 8px;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 10px;
      overflow: hidden;
      margin-bottom: 10px;
      border: 1px solid rgba(118, 200, 147, 0.1);
    }

    .route-progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--green-primary), var(--accent));
      border-radius: 10px;
      transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 0 10px rgba(118, 200, 147, 0.5);
      position: relative;
      overflow: hidden;
    }

    .route-progress-fill::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(90deg,
        transparent,
        rgba(255, 255, 255, 0.2),
        transparent);
      mix-blend-mode: screen;
    }

    .route-availability {
      font-size: 13px;
      font-weight: 600;
      color: var(--accent);
      text-align: left;
    }

    .route-availability.low {
      color: #f59e0b;
    }

    .route-availability.critical {
      color: #ef4444;
    }

    /* Footer de tarjeta: precio + bot√≥n */
    @media (min-width: 768px) {
      .routes-grid {
        max-width: 700px;
        margin-left: auto;
        margin-right: auto;
      }
    }

    .gallery-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
      margin-top: 24px;
    }

    .gallery-item {
      position: relative;
      border-radius: 16px;
      overflow: hidden;
      aspect-ratio: 1;
      box-shadow: 0 4px 12px var(--shadow);
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .gallery-item:hover {
      transform: scale(1.05);
      box-shadow: 0 8px 24px rgba(118, 200, 147, 0.3);
    }

    .gallery-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .lightbox {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.95);
      z-index: 9999;
      align-items: center;
      justify-content: center;
    }

    .lightbox.active {
      display: flex;
    }

    .lightbox-content {
      position: relative;
      max-width: 90%;
      max-height: 90vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 20px;
      padding-bottom: 80px;
    }

    .lightbox-img {
      max-width: 100%;
      max-height: 70vh;
      border-radius: 12px;
      box-shadow: 0 10px 50px rgba(0, 0, 0, 0.8);
      transition: opacity 0.3s ease, transform 0.3s ease;
    }

    .lightbox-img.fade-anim {
      opacity: 0;
      transform: scale(0.95);
    }

    #lightbox-caption {
      position: fixed;
      bottom: 40px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(26, 61, 71, 0.95);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      padding: 20px 28px;
      border-radius: 12px;
      text-align: center;
      color: white;
      border: 1px solid rgba(255, 255, 255, 0.3);
      max-width: 85%;
      transition: opacity 0.3s ease;
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.5);
      z-index: 10001;
    }

    #lightbox-caption .caption-title {
      font-size: 18px;
      font-weight: 700;
      color: var(--accent);
      margin-bottom: 8px;
      display: block;
    }

    #lightbox-caption .caption-description {
      font-size: 14px;
      font-weight: 400;
      color: var(--text-secondary);
      line-height: 1.4;
    }

    .lightbox-close {
      position: absolute;
      top: 20px;
      right: 20px;
      width: 40px;
      height: 40px;
      background: rgba(255, 255, 255, 0.1);
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      color: white;
      font-size: 24px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      z-index: 10000;
      border: none;
    }

    .lightbox-close:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: scale(1.1);
    }

    .lightbox-prev,
    .lightbox-next {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: 50px;
      height: 50px;
      background: rgba(255, 255, 255, 0.1);
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      color: white;
      font-size: 24px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      z-index: 10000;
      border: none;
    }

    .lightbox-prev {
      left: 20px;
    }

    .lightbox-next {
      right: 20px;
    }

    .lightbox-prev:hover,
    .lightbox-next:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: translateY(-50%) scale(1.1);
    }

    .about-content {
      display: flex;
      flex-direction: column;
      gap: 24px;
      margin-top: 24px;
    }

    .about-image {
      width: 100%;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 8px 24px var(--shadow);
    }

    .about-image img {
      width: 100%;
      height: auto;
      display: block;
    }

    .about-text {
      background: var(--bg-card);
      border-radius: 16px;
      padding: 24px;
      border: 1px solid rgba(118, 200, 147, 0.1);
    }

    .about-text h3 {
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 16px;
      color: var(--accent);
    }

    .about-text p {
      font-size: 15px;
      color: var(--text-secondary);
      line-height: 1.7;
      margin-bottom: 14px;
    }

    .about-text p:last-child {
      margin-bottom: 0;
    }

    .products-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
      margin-top: 24px;
    }

    .product-card {
      background: var(--bg-card);
      border-radius: 16px;
      overflow: hidden;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px var(--shadow);
      border: 1px solid rgba(118, 200, 147, 0.1);
    }

    .product-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 12px 28px rgba(118, 200, 147, 0.25);
      border-color: rgba(118, 200, 147, 0.3);
    }

    .product-image {
      width: 100%;
      height: 160px;
      object-fit: cover;
    }

    .product-info {
      padding: 16px;
      text-align: center;
    }

    .product-info h4 {
      font-size: 15px;
      font-weight: 700;
      margin-bottom: 6px;
      color: var(--text-primary);
    }

    .product-info p {
      font-size: 13px;
      color: var(--text-secondary);
    }

    .cta-section {
      background: linear-gradient(135deg, var(--green-mountain) 0%, var(--green-dark) 100%);
      padding: 32px 24px;
      text-align: center;
      margin: 40px 24px;
      border-radius: 20px;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
    }

    .cta-section h2 {
      font-size: 22px;
      margin-bottom: 12px;
      color: var(--text-primary);
      font-weight: 700;
    }

    .cta-section p {
      color: var(--text-secondary);
      margin-bottom: 24px;
      font-size: 15px;
    }

    .cta-section .btn {
      background: var(--text-primary);
      color: var(--green-dark);
      font-weight: 700;
      box-shadow: none;
    }

    .cta-section .btn:hover {
      background: #f0f0f0;
      transform: translateY(-2px);
    }

    footer {
      text-align: center;
      padding: 32px 24px;
      font-size: 13px;
      color: var(--text-secondary);
      background: rgba(14, 47, 54, 0.5);
    }

    footer p {
      margin-bottom: 8px;
    }

    .social-links {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 20px;
      margin-top: 0;
      padding-top: 0;
      border-top: none;
    }

    .social-link {
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-primary);
      text-decoration: none;
      font-size: 14px;
      transition: all 0.3s ease;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: rgba(118, 200, 147, 0.1);
    }

    .social-link:hover {
      color: var(--accent);
      background: rgba(118, 200, 147, 0.2);
      transform: translateY(-2px);
    }

    .social-link svg {
      width: 24px;
      height: 24px;
    }

    .whatsapp-float {
      position: fixed;
      bottom: 24px;
      right: 24px;
      width: 60px;
      height: 60px;
      background: var(--whatsapp);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 16px rgba(37, 211, 102, 0.4);
      z-index: 1000;
      transition: all 0.3s ease;
      text-decoration: none;
      animation: pulse-wa 2s infinite;
    }

    @keyframes pulse-wa {
      0%, 100% {
        box-shadow: 0 4px 16px rgba(37, 211, 102, 0.4);
      }
      50% {
        box-shadow: 0 4px 28px rgba(37, 211, 102, 0.7);
      }
    }

    .whatsapp-float:hover {
      transform: scale(1.1);
      box-shadow: 0 6px 24px rgba(37, 211, 102, 0.6);
    }

    .whatsapp-float svg {
      width: 32px;
      height: 32px;
      fill: white;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .fade-in-up {
      animation: fadeInUp 0.8s ease-out;
    }

    .stagger-1 { animation-delay: 0.1s; }
    .stagger-2 { animation-delay: 0.2s; }
    .stagger-3 { animation-delay: 0.3s; }
    .stagger-4 { animation-delay: 0.4s; }
    .stagger-5 { animation-delay: 0.5s; }
    .stagger-6 { animation-delay: 0.6s; }

    @media (min-width: 480px) {
      .container {
        max-width: 520px;
      }

      .products-grid {
        gap: 20px;
      }

      .product-image {
        height: 180px;
      }
    }

    @media (min-width: 768px) {
      .container {
        max-width: 720px;
      }

      .hero {
        padding: 80px 40px 60px;
      }

      .logo {
        width: 450px;
      }

      .hero h1 {
        font-size: 42px;
      }

      .hero p {
        font-size: 18px;
      }

      section {
        padding: 60px 40px;
      }

      .section-title {
        font-size: 28px;
        margin-bottom: 36px;
      }

      .cards {
        gap: 20px;
      }

      .card {
        padding: 24px;
      }

      .stats-grid {
        gap: 20px;
        margin-top: 32px;
      }

      .stat-card {
        padding: 28px 16px;
      }

      .stat-number {
        font-size: 32px;
      }

      .gallery-grid {
        grid-template-columns: repeat(3, 1fr);
        gap: 16px;
      }

      .products-grid {
        gap: 24px;
      }

      .product-image {
        height: 200px;
      }

      .cta-section {
        padding: 48px 40px;
        margin: 60px 40px;
      }

      .cta-section h2 {
        font-size: 26px;
      }

      footer {
        padding: 48px 40px;
      }
    }

    @media (min-width: 1024px) {
      .container {
        max-width: 960px;
      }

      .hero {
        padding: 100px 60px 80px;
      }

      .logo {
        width: 500px;
      }

      .hero h1 {
        font-size: 48px;
        margin-bottom: 16px;
      }

      .hero p {
        font-size: 20px;
        margin-bottom: 40px;
      }

      .btn {
        max-width: 450px;
        padding: 20px 32px;
        font-size: 18px;
      }

      section {
        padding: 80px 60px;
      }

      .section-title {
        font-size: 32px;
        margin-bottom: 40px;
      }

      .cards {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 24px;
      }

      .card {
        flex-direction: column;
        align-items: center;
        text-align: center;
        padding: 32px 24px;
      }

      .card-icon {
        font-size: 48px;
        margin-bottom: 8px;
      }

      .card-content h3 {
        font-size: 20px;
        margin-bottom: 8px;
      }

      .card-content p {
        font-size: 15px;
      }

      .stats-grid {
        gap: 24px;
        margin-top: 40px;
      }

      .stat-card {
        padding: 32px 20px;
      }

      .stat-number {
        font-size: 36px;
      }

      .stat-label {
        font-size: 13px;
      }

      .gallery-grid {
        grid-template-columns: repeat(3, 1fr);
        gap: 20px;
      }

      .about-content {
        flex-direction: row;
        align-items: center;
        gap: 32px;
      }

      .about-image {
        flex: 1;
        max-width: 45%;
      }

      .about-text {
        flex: 1;
        padding: 32px;
      }

      .about-text h3 {
        font-size: 24px;
        margin-bottom: 20px;
      }

      .about-text p {
        font-size: 16px;
        margin-bottom: 16px;
      }

      .products-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 32px;
        max-width: 700px;
        margin: 40px auto 0;
      }

      .product-image {
        height: 220px;
      }

      .product-info {
        padding: 20px;
      }

      .product-info h4 {
        font-size: 16px;
      }

      .cta-section {
        padding: 60px 60px;
        margin: 80px 60px;
      }

      .cta-section h2 {
        font-size: 28px;
        margin-bottom: 16px;
      }

      .cta-section p {
        font-size: 16px;
        margin-bottom: 32px;
      }

      footer {
        padding: 60px 60px;
        font-size: 14px;
      }

      .social-links {
        gap: 24px;
      }

      .social-link {
        width: 44px;
        height: 44px;
      }

      .social-link svg {
        width: 26px;
        height: 26px;
      }

      .whatsapp-float {
        width: 70px;
        height: 70px;
        bottom: 32px;
        right: 32px;
      }

      .whatsapp-float svg {
        width: 36px;
        height: 36px;
      }
    }

    @media (min-width: 1280px) {
      .container {
        max-width: 1200px;
      }

      .hero {
        padding: 120px 80px 100px;
      }

      .logo {
        width: 550px;
      }

      .hero h1 {
        font-size: 56px;
      }

      section {
        padding: 100px 80px;
      }

      .section-title {
        font-size: 36px;
      }

      .cards {
        gap: 32px;
      }

      .card {
        padding: 40px 28px;
      }

      .gallery-grid {
        grid-template-columns: repeat(3, 1fr);
        gap: 24px;
      }

      .products-grid {
        max-width: 800px;
        gap: 40px;
      }

      .product-image {
        height: 240px;
      }

      .cta-section {
        padding: 70px 80px;
        margin: 100px 80px;
      }
    }

    @media (min-width: 1920px) {
      .container {
        max-width: 1400px;
      }

      .gallery-grid {
        grid-template-columns: repeat(4, 1fr);
      }
    }

    @media (max-width: 480px) {
      .lightbox-prev,
      .lightbox-next {
        width: 40px;
        height: 40px;
        font-size: 20px;
      }

      .lightbox-prev {
        left: 10px;
      }

      .lightbox-next {
        right: 10px;
      }

      .lightbox-close {
        top: 10px;
        right: 10px;
        width: 36px;
        height: 36px;
        font-size: 20px;
      }

      .whatsapp-float {
        bottom: 20px;
        right: 20px;
        width: 56px;
        height: 56px;
      }

      #lightbox-caption {
        font-size: 13px;
        padding: 12px 16px;
      }
    }

    @media (max-width: 360px) {
      .hero {
        padding: 50px 20px 40px;
      }

      .btn {
        font-size: 15px;
        padding: 16px 24px;
      }

      .section-title {
        font-size: 20px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <section class="hero fade-in-up">
      <img src="logo.png" alt="Somos Aventurados Logo" class="logo">
      <h1>
        Vive la aventura <span class="highlight">con nosotros</span>
      </h1>
      <p>Ecoturismo ¬∑ Senderismo ¬∑ Comunidad</p>
      <a href="https://whatsapp.com/channel/0029Vb6vCSj4yltO4CJQJL2L" class="btn" target="_blank" rel="noopener">
        <svg viewBox="0 0 32 32" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
          <path d="M19.11 17.53c-.27-.14-1.6-.79-1.85-.88-.25-.09-.43-.14-.61.14-.18.27-.7.88-.86 1.06-.16.18-.32.2-.59.07-.27-.14-1.14-.42-2.17-1.33-.8-.71-1.34-1.6-1.5-1.87-.16-.27-.02-.42.12-.56.12-.12.27-.32.41-.48.14-.16.18-.27.27-.45.09-.18.05-.34-.02-.48-.07-.14-.61-1.48-.84-2.03-.22-.53-.45-.46-.61-.46h-.52c-.18 0-.48.07-.73.34-.25.27-.96.93-.96 2.26s.98 2.62 1.12 2.8c.14.18 1.93 2.95 4.67 4.13.65.28 1.16.45 1.55.58.65.21 1.25.18 1.72.11.52-.08 1.6-.65 1.83-1.27.23-.62.23-1.15.16-1.27-.07-.11-.25-.18-.52-.32z"/>
          <path d="M16.04 2.67C8.83 2.67 3 8.49 3 15.7c0 2.5.65 4.85 1.78 6.9L3 29l6.55-1.72c1.98 1.08 4.26 1.7 6.49 1.7 7.21 0 13.04-5.83 13.04-13.04S23.25 2.67 16.04 2.67zm0 23.6c-2.06 0-4.07-.56-5.83-1.63l-.42-.25-3.89 1.02 1.04-3.78-.27-.39c-1.1-1.77-1.68-3.81-1.68-5.9 0-6.09 4.96-11.05 11.05-11.05 2.95 0 5.73 1.15 7.82 3.23 2.09 2.09 3.23 4.87 3.23 7.82 0 6.09-4.96 11.05-11.05 11.05z"/>
        </svg>
        S√© un Aventurado
      </a>
      <a href="https://whatsapp.com/channel/0029Vb6vCSj4yltO4CJQJL2L" class="hero-subcopy" target="_blank" rel="noopener">
        üì≤ √önete al canal y no te pierdas ninguna aventura
      </a>
    </section>

    <section class="fade-in-up stagger-1">
      <h2 class="section-title">¬øQui√©nes Somos?</h2>
      <div class="cards">
        <div class="card">
          <div class="card-icon">üå≤</div>
          <div class="card-content">
            <h3>Ecoturismo Responsable</h3>
            <p>Experiencias √∫nicas en la naturaleza, cuidando y respetando cada entorno que visitamos.</p>
          </div>
        </div>
        <div class="card">
          <div class="card-icon">ü•æ</div>
          <div class="card-content">
            <h3>Senderismo Guiado</h3>
            <p>Rutas dise√±adas para todos los niveles, desde principiantes hasta aventureros experimentados.</p>
          </div>
        </div>
        <div class="card">
          <div class="card-icon">üî•</div>
          <div class="card-content">
            <h3>Comunidad de Aventurados</h3>
            <p>√önete a m√°s de 700 aventurados que comparten la pasi√≥n por explorar la naturaleza.</p>
          </div>
        </div>
      </div>

      <div class="stats-grid">
        <div class="stat-card">
          <span class="stat-number">800+</span>
          <span class="stat-label">Aventurados</span>
        </div>
        <div class="stat-card">
          <span class="stat-number">+20</span>
          <span class="stat-label">Rutas</span>
        </div>
        <div class="stat-card">
          <span class="stat-number">2024</span>
          <span class="stat-label">Desde</span>
        </div>
      </div>
    </section>

    <!-- PR√ìXIMAS AVENTURAS (Supabase) -->
    <section id="upcomingRoutes" class="fade-in-up stagger-2">
      <h2 class="section-title">‚õ∞Ô∏è Pr√≥ximas Aventuras</h2>
      <div id="routesGrid" class="routes-grid">
        <div class="routes-loading">Cargando pr√≥ximas rutas...</div>
      </div>
    </section>

    <section class="fade-in-up stagger-2">
      <h2 class="section-title">Nuestras Aventuras</h2>
      <div class="gallery-grid" id="gallery">
        <div class="gallery-item" data-index="0">
          <img src="galeria1.jpg" alt="Cascada Los Gavilanes" loading="lazy" data-title="Cascada Los Gavilanes" data-caption="Un tesoro en la cumaca">
        </div>
        <div class="gallery-item" data-index="1">
          <img src="galeria2.jpg" alt="Nuestros aventurados" loading="lazy" data-title="Nuestros Aventurados" data-caption="Disfrutando del paisaje y nuevas experiencias">
        </div>
        <div class="gallery-item" data-index="2">
          <img src="galeria3.jpg" alt="Cascada Los Aguacates" loading="lazy" data-title="Cascada Los Aguacates" data-caption="Un para√≠so escondido en la hacienda Santa Clara">
        </div>
        <div class="gallery-item" data-index="3">
          <img src="galeria4.jpg" alt="El chorrer√≥n de Chuao" loading="lazy" data-title="El Chorrer√≥n de Chuao" data-caption="Una traves√≠a en donde se cosecha el mejor cacao de Venezuela">
        </div>
        <div class="gallery-item" data-index="4">
          <img src="galeria5.jpg" alt="Cascada la reina" loading="lazy" data-title="Cascada La Reina" data-caption="Una maravilla escondida en los altos del Cabriales">
        </div>
        <div class="gallery-item" data-index="5">
          <img src="galeria6.jpg" alt="Los Azules" loading="lazy" data-title="Los Azules" data-caption="El jacuzzi natural con la mejor vista en Carabobo">
        </div>
      </div>
    </section>

    <div class="lightbox" id="lightbox">
      <button class="lightbox-close" id="lightbox-close">√ó</button>
      <button class="lightbox-prev" id="lightbox-prev">‚Äπ</button>
      <div class="lightbox-content">
        <img class="lightbox-img" id="lightbox-img" src="" alt="Imagen ampliada">
      </div>
      <button class="lightbox-next" id="lightbox-next">‚Ä∫</button>
      <div id="lightbox-caption"></div>
    </div>

    <section class="fade-in-up stagger-3">
      <h2 class="section-title">Nuestra Historia</h2>
      <div class="about-content">
        <div class="about-image">
          <img src="cl.jpg" alt="Chantal y Luisfer" loading="lazy">
        </div>
        <div class="about-text">
          <p>Somos Chantal y Luisfer, dos amantes de la naturaleza que decidimos compartir nuestra pasi√≥n por el ecoturismo y el senderismo con el mundo.</p>
          <p>Desde agosto de 2024, hemos guiado a cientos de aventurados a trav√©s de las rutas m√°s espectaculares, siempre con un enfoque en el respeto al medio ambiente y la conexi√≥n con la naturaleza.</p>
          <p>Cada aventura es una oportunidad para crear recuerdos inolvidables, conocer nuevos amigos y reconectar con lo que realmente importa.</p>
        </div>
      </div>
    </section>

    <section class="fade-in-up stagger-4">
      <h2 class="section-title">Equ√≠pate para la Aventura</h2>
      <div class="products-grid">
        <div class="product-card">
          <img src="chaqueta.png" alt="Cortavientos personalizados" class="product-image">
          <div class="product-info">
            <h4>Chaquetas Cortavientos</h4>
            <p>Dise√±os exclusivos</p>
          </div>
        </div>
        <div class="product-card">
          <img src="franela.png" alt="Franelas personalizadas" class="product-image">
          <div class="product-info">
            <h4>Franelas Aventura</h4>
            <p>Dise√±os exclusivos</p>
          </div>
        </div>
      </div>
    </section>

    <div class="cta-section fade-in-up stagger-5">
      <h2>¬øListo para tu Pr√≥xima Aventura?</h2>
      <p>Cont√°ctanos por WhatsApp y descubre todas nuestras rutas disponibles</p>
      <a href="https://wa.me/584244656881" class="btn" target="_blank" rel="noopener">
        <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
          <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
        </svg>
        Escr√≠benos Ahora
      </a>
    </div>

    <footer class="fade-in-up stagger-6">
      <p><strong>¬© 2026 SomosAventura2</strong></p>
      <p>Ecoturismo responsable y senderismo guiado</p>
      <div class="social-links">
        <a href="https://www.instagram.com/somosaventura2/" target="_blank" rel="noopener" class="social-link" aria-label="Instagram">
          <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
          </svg>
        </a>
        <a href="https://www.tiktok.com/@aventura2clips" target="_blank" rel="noopener" class="social-link" aria-label="TikTok">
          <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path d="M19.59 6.69a4.83 4.83 0 01-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 01-5.2 1.74 2.89 2.89 0 012.31-4.64 2.93 2.93 0 01.88.13V9.4a6.84 6.84 0 00-1-.05A6.33 6.33 0 005 20.1a6.34 6.34 0 0010.86-4.43v-7a8.16 8.16 0 004.77 1.52v-3.4a4.85 4.85 0 01-1-.1z"/>
          </svg>
        </a>
      </div>
    </footer>

    <a href="https://wa.me/584244656881" class="whatsapp-float" target="_blank" rel="noopener" aria-label="WhatsApp">
      <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
      </svg>
    </a>
  </div>

  <script>
    // Galer√≠a Lightbox con Swipe y Caption
    const galleryItems = document.querySelectorAll('.gallery-item');
    const lightbox = document.getElementById('lightbox');
    const lightboxImg = document.getElementById('lightbox-img');
    const lightboxCaption = document.getElementById('lightbox-caption');
    const lightboxClose = document.getElementById('lightbox-close');
    const lightboxPrev = document.getElementById('lightbox-prev');
    const lightboxNext = document.getElementById('lightbox-next');
    
    let currentIndex = 0;
    const images = [];
    
    // Recopilar todas las im√°genes de la galer√≠a
    galleryItems.forEach((item, index) => {
      const img = item.querySelector('img');
      images.push({
        src: img.src,
        title: img.getAttribute('data-title') || '',
        caption: img.getAttribute('data-caption') || ''
      });
      
      item.addEventListener('click', () => {
        openLightbox(index);
      });
    });
    
    function openLightbox(index) {
      currentIndex = index;
      updateLightbox();
      lightbox.classList.add('active');
      document.body.classList.add('lightbox-open');
    }
    
    function updateLightbox() {
      lightboxImg.classList.add('fade-anim');
      if (lightboxCaption) {
        lightboxCaption.style.opacity = '0';
      }

      setTimeout(() => {
        lightboxImg.src = images[currentIndex].src;
        if (lightboxCaption) {
          const title = images[currentIndex].title || 'Sin t√≠tulo';
          const description = images[currentIndex].caption || 'Sin descripci√≥n';
          
          lightboxCaption.innerHTML = '<span class="caption-title">' + title + '</span><span class="caption-description">' + description + '</span>';
          
          console.log('Mostrando - Title:', title, 'Description:', description);
        }
        
        lightboxImg.onload = () => {
          lightboxImg.classList.remove('fade-anim');
          if (lightboxCaption) {
            lightboxCaption.style.opacity = '1';
            lightboxCaption.style.display = 'block';
          }
        };
      }, 150);
    }
    
    function closeLightbox() {
      lightbox.classList.remove('active');
      document.body.classList.remove('lightbox-open');
    }
    
    function changeImage(direction) {
      currentIndex += direction;
      
      if (currentIndex < 0) {
        currentIndex = images.length - 1;
      } else if (currentIndex >= images.length) {
        currentIndex = 0;
      }
      
      updateLightbox();
    }
    
    // Event listeners
    lightboxClose.addEventListener('click', closeLightbox);
    
    lightboxPrev.addEventListener('click', (e) => {
      e.stopPropagation();
      changeImage(-1);
    });
    
    lightboxNext.addEventListener('click', (e) => {
      e.stopPropagation();
      changeImage(1);
    });
    
    lightbox.addEventListener('click', (e) => {
      if (e.target === lightbox) {
        closeLightbox();
      }
    });
    
    // Soporte de teclado
    document.addEventListener('keydown', (e) => {
      if (!lightbox.classList.contains('active')) return;
      
      if (e.key === 'Escape') {
        closeLightbox();
      } else if (e.key === 'ArrowLeft') {
        changeImage(-1);
      } else if (e.key === 'ArrowRight') {
        changeImage(1);
      }
    });

    // Soporte de Swipe para m√≥viles
    let touchStartX = 0;
    let touchEndX = 0;
    
    lightbox.addEventListener('touchstart', (e) => {
      touchStartX = e.changedTouches[0].screenX;
    }, false);
    
    lightbox.addEventListener('touchend', (e) => {
      touchEndX = e.changedTouches[0].screenX;
      handleSwipe();
    }, false);
    
    function handleSwipe() {
      const swipeThreshold = 50;
      
      if (touchEndX < touchStartX - swipeThreshold) {
        // Swipe left - siguiente imagen
        changeImage(1);
      }
      
      if (touchEndX > touchStartX + swipeThreshold) {
        // Swipe right - imagen anterior
        changeImage(-1);
      }
    }

    // ===============================
    // PR√ìXIMAS AVENTURAS (Supabase)
    // ===============================
    const SUPABASE_URL = 'https://dgubxitmqegounjyeciw.supabase.co';
    const SUPABASE_ANON_KEY = 'sb_publishable_EY4EoqiHn7om0Qf-HYpJZQ_HwDJXlan';
    
    let supabaseClient = null;
    let realtimeChannel = null;
    
    // Inicializar Supabase
    try {
      supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
    } catch (error) {
      console.error('Error inicializando Supabase:', error);
    }

    // Funci√≥n para calcular cupos ocupados de una ruta
    async function calcularCuposOcupados(rutaId) {
      try {
        const { data: participantes, error } = await supabaseClient
          .from('participantes')
          .select('id')
          .eq('ruta_id', rutaId);
        
        if (error) {
          console.error('Error calculando cupos:', error);
          return 0;
        }
        
        return participantes ? participantes.length : 0;
      } catch (error) {
        console.error('Error en calcularCuposOcupados:', error);
        return 0;
      }
    }

    // Funci√≥n para renderizar una tarjeta de ruta - dise√±o Split Card
    function renderizarRuta(ruta, cuposOcupados) {
      const disponibles = ruta.cupos - cuposOcupados;
      const porcentajeOcupado = ruta.cupos > 0 ? (cuposOcupados / ruta.cupos) * 100 : 0;
      
      // Determinar clase de urgencia
      let claseUrgencia = 'normal';
      let mensajeUrgencia = `${disponibles} cupos disponibles`;
      
      if (disponibles <= 0) {
        claseUrgencia = 'critical';
        mensajeUrgencia = '¬°Agotado!';
      } else if (disponibles < 5) {
        claseUrgencia = 'low';
        mensajeUrgencia = `¬°Solo ${disponibles} cupos!`;
      }

      // Determinar d√≠a de la semana y fecha legible (forzando hora al mediod√≠a para evitar problemas de zona horaria)
      const fechaObj = new Date(ruta.fecha + 'T12:00:00');
      const esSabado = fechaObj.getDay() === 6;
      const nombreDia = fechaObj.toLocaleDateString('es-ES', { weekday: 'long' }).toUpperCase();
      // Ej: "15 de marzo" -> "15 de Marzo"
      let fechaFormateada = fechaObj.toLocaleDateString('es-ES', { day: 'numeric', month: 'long' });
      fechaFormateada = fechaFormateada.charAt(0).toUpperCase() + fechaFormateada.slice(1);

      // Precio en euros
      const precioEuros = ruta.precio_euros || ruta.precio_euro || 0;
      const precioFormateado = precioEuros > 0 ? `${parseFloat(precioEuros).toFixed(0)}‚Ç¨` : 'N/A';

      // Mensaje para WhatsApp
      const mensajeWhatsApp = encodeURIComponent(`Hola, quiero ir a ${ruta.nombre}`);
      const urlWhatsApp = `https://wa.me/584244656881?text=${mensajeWhatsApp}`;

      const clasesDia = esSabado ? 'sabado' : 'domingo';

      // Seleccionar imagen de fondo: primero foto_url, luego fallback por d√≠a
      let imagenFondo;
      if (ruta.foto_url) {
        imagenFondo = ruta.foto_url;
      } else {
        imagenFondo = esSabado ? 'flyersab.jpg' : 'flyerdom.jpg';
      }

      return `
        <div class="route-card">
          <div class="route-image-header ${clasesDia}" style="background-image: url('${imagenFondo}');">
            <div class="route-day-indicator">${nombreDia}</div>
          </div>

          <div class="route-card-inner">
            <div class="route-header">
              <h3 class="route-title">${ruta.nombre}</h3>
              <div class="route-subdate">üìÖ ${fechaFormateada}</div>
            </div>

            <div class="route-info-grid">
              <div class="route-info-item">
                <span class="route-info-label">Cupos totales</span>
                <span class="route-info-value">${ruta.cupos} personas</span>
              </div>
              <div class="route-info-item">
                <span class="route-info-label">Ocupados</span>
                <span class="route-info-value">${cuposOcupados} / ${ruta.cupos}</span>
              </div>
            </div>

            <div class="route-progress">
              <div class="route-progress-bar">
                <div class="route-progress-fill" style="width: ${Math.min(porcentajeOcupado, 100)}%"></div>
              </div>
              <div class="route-availability ${claseUrgencia}">${mensajeUrgencia}</div>
            </div>

            <div style="margin-top: auto; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.1); display: flex; justify-content: space-between; align-items: center; gap: 15px;">
              <div style="display: flex; flex-direction: column; justify-content: center;">
                <span style="font-size: 0.7rem; color: #b8c5be; text-transform: uppercase; letter-spacing: 0.5px; line-height: 1; display: block; margin-bottom: 4px;">Precio Ref</span>
                <span style="font-size: 2.2rem; font-weight: 800; color: #ffffff; line-height: 1.1;">${precioFormateado}</span>
              </div>
              <a 
                href="${urlWhatsApp}" 
                class="route-btn" 
                target="_blank" 
                rel="noopener"
                style="flex: 1; max-width: 200px; background: #25D366; color: #0e2f36; padding: 10px 16px; border-radius: 12px; font-weight: 700; text-decoration: none; display: flex; align-items: center; justify-content: center; gap: 8px; box-shadow: 0 4px 15px rgba(37, 211, 102, 0.3); white-space: nowrap; transition: transform 0.2s;">
                <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" style="width: 18px; height: 18px;">
                  <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
                </svg>
                <span>Reservar ahora</span>
              </a>
            </div>
          </div>
        </div>
      `;
    }

    // Funci√≥n principal para cargar y mostrar rutas
    async function cargarRutasProximas() {
      const seccionRutas = document.getElementById('upcomingRoutes');
      const gridRutas = document.getElementById('routesGrid');
      
      if (!seccionRutas || !gridRutas || !supabaseClient) {
        if (seccionRutas) seccionRutas.style.display = 'none';
        return;
      }

      try {
        // Obtener fecha de hoy
        const hoy = new Date();
        hoy.setHours(0, 0, 0, 0);
        const hoyISO = hoy.toISOString().split('T')[0];

        // Consultar las 2 pr√≥ximas rutas activas
        const { data: rutas, error } = await supabaseClient
          .from('rutas')
          .select('*')
          .eq('archivada', false)
          .gte('fecha', hoyISO)
          .order('fecha', { ascending: true })
          .limit(2);

        if (error) {
          console.error('Error cargando rutas:', error);
          seccionRutas.style.display = 'none';
          return;
        }

        // Si no hay rutas, ocultar secci√≥n
        if (!rutas || rutas.length === 0) {
          seccionRutas.style.display = 'none';
          return;
        }

        // Calcular cupos ocupados para cada ruta
        const rutasConCupos = await Promise.all(
          rutas.map(async (ruta) => {
            const cuposOcupados = await calcularCuposOcupados(ruta.id);
            return { ...ruta, cuposOcupados };
          })
        );

        // Renderizar tarjetas
        gridRutas.innerHTML = rutasConCupos
          .map(ruta => renderizarRuta(ruta, ruta.cuposOcupados))
          .join('');

        // Mostrar secci√≥n con animaci√≥n
        seccionRutas.classList.add('active');
        seccionRutas.style.display = 'block';

      } catch (error) {
        console.error('Error en cargarRutasProximas:', error);
        seccionRutas.style.display = 'none';
      }
    }

    // Inicializar suscripci√≥n Realtime para mantener las rutas actualizadas
    function initRealtimeRutas() {
      if (!supabaseClient || realtimeChannel) return;

      realtimeChannel = supabaseClient
        .channel('cambios-reservas-rutas-landing')
        .on(
          'postgres_changes',
          { event: '*', schema: 'public', table: 'reservas' },
          () => {
            console.log('üîÅ Cambio en reservas detectado, recargando pr√≥ximas rutas (landing)...');
            cargarRutasProximas();
          }
        )
        .on(
          'postgres_changes',
          { event: '*', schema: 'public', table: 'rutas' },
          () => {
            console.log('üîÅ Cambio en rutas detectado, recargando pr√≥ximas rutas (landing)...');
            cargarRutasProximas();
          }
        )
        .subscribe();
    }

    // Cargar rutas cuando el DOM est√© listo y activar Realtime
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', () => {
        cargarRutasProximas();
        initRealtimeRutas();
      });
    } else {
      cargarRutasProximas();
      initRealtimeRutas();
    }
  </script>
</body>
</html>